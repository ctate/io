# Merge translations into the application

To merge completed translations into your project, follow these steps:

1. Use the Angular CLI to build a copy of the distributable files of your project.
2. Use the `"localize"` option to replace all i18n messages with valid translations and build a localized variant application. A variant application is a complete copy of the distributable files translated for a single locale.

After merging translations, serve each distributable copy using server-side language detection or different subdirectories.

For more information on serving each distributable copy, see deploying multiple locales.

The build process uses ahead-of-time (AOT) compilation for a small, fast, ready-to-run application. For a detailed explanation of the build process, see Building and serving Angular apps.

The build process supports translation files in the `.xlf` format or other formats understood by Angular, such as `.xtb`. For more information about translation file formats, see Change the source language file format.

To build a separate distributable copy for each locale, define the locales in the build configuration in the `angular.json` workspace build configuration file. This method shortens the build process by removing the need for a full application build for each locale.

To generate application variants for each locale, use the `"localize"` option in the `angular.json` workspace build configuration file. To build from the command line, use the `build` Angular CLI command with the `--localize` option.

Optionally, apply specific build options for just one locale for a custom locale configuration.

## Define locales in the build configuration

Use the `i18n` project option in the `angular.json` workspace build configuration file to define locales for a project. The following sub-options identify the source language and tell the compiler where to find supported translations:

- `sourceLocale`: The locale used within the application source code (default is `en-US`).
- `locales`: A map of locale identifiers to translation files.

### Example `angular.json` for `en-US` and `fr`

The following excerpt sets the source locale to `en-US` and provides the path to the French (`fr`) locale translation file.

## Generate application variants for each locale

To use your locale definition in the build configuration, set the `"localize"` option in the `angular.json` workspace build configuration file:

- Set `"localize"` to `true` for all defined locales.
- Set `"localize"` to an array of a subset of defined locale identifiers to build only those versions.
- Set `"localize"` to `false` to disable localization.

AOT compilation is required to localize component templates. If you change this setting, set `"aot"` to `true`.

The CLI loads and registers locale data, places each generated version in a locale-specific directory, and adjusts the HTML base HREF for each version by adding the locale to the configured `baseHref`.

Set the `"localize"` property as a shared configuration to inherit for all configurations.

### Example `angular.json` including all locales

The following example displays the `"localize"` option set to `true` in the `angular.json` workspace build configuration file, so that all locales defined are built.

## Build from the command line

Use the `--localize` option with the `ng build` command and your existing `production` configuration. The CLI builds all locales defined in the build configuration.

For more information on setting the locales, see Generate application variants for each locale.

## Apply specific build options for just one locale

To apply specific build options to only one locale, specify a single locale for a custom locale-specific configuration. Use the Angular CLI development server (`ng serve`) with only a single locale.

### Example build for French

The following example displays a custom locale-specific configuration using a single locale. Pass this configuration to the `ng serve` or `ng build` commands.

For production builds, use configuration composition to run both configurations.

## Report missing translations

When a translation is missing, the build succeeds but generates a warning. To configure the warning level generated by the Angular compiler, specify one of the following levels:

- `error`: Throw an error and the build fails.
- `ignore`: Do nothing.
- `warning`: Displays the default warning in the console.

Specify the warning level in the `options` section for the `build` target of your `angular.json` workspace build configuration file.

### Example `angular.json` `error` warning

The following example shows how to set the warning level to `error`.

When you compile your Angular project, instances of the `i18n` attribute are replaced with instances of the `$localize` tagged message string. This means your Angular application is translated after compilation, allowing you to create localized versions without recompiling for each locale.

In summary: Compile once, then translate for each locale.

## What's next

For more information, see Deploy multiple locales.